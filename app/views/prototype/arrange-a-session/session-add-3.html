{% extends "layout.html" %}

{% block pageTitle %}
Case summary
{% endblock %}

{% block bodyStart %}

{% block keyDetails %}
{% include "includes/service-user-banner.html" %}
{% endblock %}

{% endblock %}

{% block beforeContent %}
<a href="../progress" class="govuk-back-link">Back to {{ case.serviceUserPersonalDetails.firstName }}’s progress</a>
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        <form action="session-add-4" method="post" class="form">
          {% set rarCategories = [
            'Employment, Training and Education',
            'Wellbeing – both physical and mental',
            'Finance, benefit and debt',
            'Relationships',
            'Restorative Justice Interventions',
            'Substance Misuse',
            'Alcohol Treatment Requirements or Mental Health Treatment Requirements',
            'Thinking skills, attitudes and behaviour'
          ] %}

          {% set rarRadioItems = [] %}
          {% for rarCategory in rarCategories %}
            {% set rarRadioItems = (rarRadioItems.push({
              text: rarCategory,
              value: rarCategory,
              checked: checked("session-rar-category", rarCategory)
            }), rarRadioItems) %}
          {% endfor %}

          {% set rarCategoryHtml %}
            {{ govukRadios({
                 fieldset: {
                   legend: {
                     text: "What will this session count towards?",
                     classes: 'govuk-!-font-weight-bold'
                   }
                 },
                 name: 'session-rar-category',
                 items: rarRadioItems
                 }) }}
          {% endset %}

          {{ govukRadios({
               fieldset: {
                 legend: {
                   text: "Would you like this to count towards RAR?",
                   classes: "govuk-label--l"
                 }
               },
               hint: {
                 html: 'This will account for one day of Rehabilitation Activity Requirement (RAR).'
               },
               name: 'session-counts-towards-rar',
               items: [
                 {
                   text: 'Yes',
                   value: 'Yes',
                   checked: checked('session-counts-towards-rar', 'Yes'),
                   conditional: {
                     html: rarCategoryHtml
                   }
                 },
                 {
                   text: 'No',
                   value: 'No',
                   checked: checked('session-counts-towards-rar', 'No')
                 }
               ]
               }) }}

           {{ govukTextarea({
                label: {
                  text: 'Add a calendar note (optional)',
                  classes: 'govuk-label--l'
                },
                name: 'session-notes',
                value: data['session-notes']
              }) }}



           {{ govukButton({
             text: "Save and continue"
           }) }}
        </form>
    </div>
</div>

{% endblock %}
