{% extends "layout.html" %}

{% block pageTitle %}
Case summary
{% endblock %}

{% block bodyStart %}

{% block keyDetails %}
{% include "includes/service-user-banner.html" %}
{% endblock %}

{% endblock %}

{% block beforeContent %}
<a href="../progress" class="govuk-back-link">Back to {{ case.serviceUserPersonalDetails.firstName }}â€™s progress</a>
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <form action="session-add-5" method="post" class="form">

      <h1 class="govuk-heading-l">Check your answers</h1>

      {% set arrangedSession = arrangedSession(
          data['provider-code'],
          data['type-of-session'],
          data['session-date'],
          data['session-start-time'],
          data['session-end-time'],
          data['session-counts-towards-rar'] == 'Yes',
          data['session-rar-category']
      ) %}

      {{ govukSummaryList({
        classes: 'govuk-!-margin-bottom-9',
        rows: [
          {
            key: { text: "Type of session" },
            value: { text: arrangedSession.summary.typeOfSession },
            actions: {
              items: [
                {
                  href: "session-add-1",
                  text: "Change",
                  visuallyHiddenText: "type of session"
                }
              ]
            }
          },
          {
            key: { text: "Date" },
            value: { text: arrangedSession.summary.date | dateWithDayAndWithoutYear },
            actions: {
              items: [
                {
                  href: "session-add-2",
                  text: "Change",
                  visuallyHiddenText: "date"
                }
              ]
            }
          },
          {
            key: { text: "Time" },
            value: { text: arrangedSession.summary.time },
            actions: {
              items: [
                {
                  href: "session-add-2",
                  text: "Change",
                  visuallyHiddenText: "time"
                }
              ]
            }
          },
          {
            key: { text: "RAR activity" },
            value: { text: arrangedSession.summary.rarCategory },
            actions: {
              items: [
                {
                  href: "session-add-3",
                  text: "Change",
                  visuallyHiddenText: "RAR activity"
                }
              ]
            }
          } if arrangedSession.summary.rarCategory,
          {
            key: { text: "Counts towards RAR?" },
            value: { text: 'Yes' if arrangedSession.summary.countsTowardsRAR else 'No' },
            actions: {
              items: [
                {
                  href: "session-add-3",
                  text: "Change",
                  visuallyHiddenText: "RAR activity"
                }
              ]
            }
          } if not arrangedSession.summary.countsTowardsRAR,
          {
            key: { text: "Calendar note" },
            value: { text: data['session-notes'] },
            actions: {
              items: [
                {
                  href: "session-add-3",
                  text: "Change",
                  visuallyHiddenText: "calendar note"
                }
              ]
            }
          }
        ]
        }) }}

      <button class="govuk-button" data-module="govuk-button">
        Arrange this session
      </button>

    </form>

  </div>
</div>

{% endblock %}
