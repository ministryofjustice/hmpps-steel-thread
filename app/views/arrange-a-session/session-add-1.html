{% extends "layout.html" %}

{% block pageTitle %}
Case summary
{% endblock %}

{% block bodyStart %}

{% block keyDetails %}
{% include "includes/service-user-banner.html" %}
{% endblock %}

{% endblock %}

{% block beforeContent %}
<a href="../progress" class="govuk-back-link">Back to {{ case.serviceUserPersonalDetails.firstName }}â€™s progress</a>
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <form action="session-add-where" method="post" class="form">

      {% set contactTypeSelectItems = [{ text: '', value: ''}] %}
      {% for contactType in possibleContactTypes(data['provider-code']) | sort(false, false, 'description') %}
        {% set contactTypeSelectItems = (contactTypeSelectItems.push({
          text: contactType.description,
          value: contactType.code,
          checked: checked("type-of-session-other", contactType.code)
        }), contactTypeSelectItems) %}
      {% endfor %}

      {{ govukRadios({
           fieldset: {
             legend: {
               text: "What type of session would you like to arrange?",
               classes: "govuk-label--l"
             }
           },
           name: 'type-of-session',
           items: [
             {
               text: "Office visit",
               value: 'Office visit',
               checked: checked("type-of-session", "Office visit")
             },
             {
               text: "Home visit",
               value: "Home visit",
               checked: checked("type-of-session", "Home visit")
             },
             {
               text: "Video call",
               value: "Video call",
               checked: checked("type-of-session", "Video call")
             },
             {
               text: "Phone call",
               value: "Phone call",
               checked: checked("type-of-session", "Phone call")
             },
             {
               text: "Other",
               value: "Other",
               checked: checked("type-of-session", "Other"),
               conditional: {
                 html: govukSelect({
                        id: "type-of-session-other",
                        name: "type-of-session-other",
                        label: {
                          text: "Type of session",
                          classes: "govuk-label--s"
                        },
                        items: contactTypeSelectItems
                      })
               }
             }
           ]
           }) }}

       {{ govukButton({
         text: "Save and continue"
       }) }}
    </form>
  </div>

</div>

{% endblock %}
